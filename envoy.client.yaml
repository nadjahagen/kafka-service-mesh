static_resources:
  listeners:
    - address:
        socket_address:
          address: 0.0.0.0 # Host that Kafka clients should connect to.
          port_value: 4000  # Port that Kafka clients should connect to.
      filter_chains:
        - filters:
          - name: envoy.filters.network.kafka_mesh
            typed_config:
              "@type": type.googleapis.com/envoy.extensions.filters.network.kafka_mesh.v3alpha.KafkaMesh
              advertised_host: "127.0.0.1"
              advertised_port: 19092
              upstream_clusters:
                - cluster_name: kafka
                  bootstrap_servers: kafka:19092
                  partition_count: 1
              forwarding_rules:
                - target_cluster: kafka
                  topic_prefix: apples
  #clusters:
  #  - name: client
  #    type: STATIC
  #    transport_socket:
  #      name: envoy.transport_sockets.tls
  #      typed_config:
  #        "@type": type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext
  #        common_tls_context:
  #          tls_certificates:
  #            - certificate_chain: { filename: "./certs/kafka-broker.server.cert.pem" }
   #             private_key: { filename: "./certs/kafka-broker.server.key.pem" }
   #             password:
  #                inline_string: "certkeypass"
  #          validation_context:
  #            trusted_ca:
  #              filename: certs/kafka-broker.ca.cert.pem
